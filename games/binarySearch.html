<!doctype html>
<html lang="en">
  <head>
    <title>Binary Search Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <!-- <script src="binaryGame.js" charset="utf-8"></script> -->
    <link rel="stylesheet" type="text/css" href="binarySearch.css">
    <link rel="shortcut icon" href="">
  </head>

  <body>
    <div class="title" id="ritle">Binary Search Game</div>

    </br>

    <div class="instructions" id="instructions"></div>

    </br>

    <div class="randomAnimal" id="randomAnimal"></div>

    </br>

    <button class="card" id="button0" onclick="nextIndex(0)"></button>
    <button class="card" id="button1" onclick="nextIndex(1)"></button>
    <button class="card" id="button2" onclick="nextIndex(2)"></button>
    <button class="card" id="button3" onclick="nextIndex(3)"></button>
    <button class="card" id="button4" onclick="nextIndex(4)"></button>
    <button class="card" id="button5" onclick="nextIndex(5)"></button>
    <button class="card" id="button6" onclick="nextIndex(6)"></button>
    <button class="card" id="button7" onclick="nextIndex(7)"></button>
    <button class="card" id="button8" onclick="nextIndex(8)"></button>
    <button class="card" id="button9" onclick="nextIndex(9)"></button>
    <button class="card" id="button10" onclick="nextIndex(10)"></button>
    <button class="card" id="button11" onclick="nextIndex(11)"></button>
    <button class="card" id="button12" onclick="nextIndex(12)"></button>
    <button class="card" id="button13" onclick="nextIndex(13)"></button>
    <button class="card" id="button14" onclick="nextIndex(14)"></button>

    </br>
    </br>

    <div class="update" id="update">&nbsp;</div>

    </br>

    <button class="playAgainButton" id="playAgainButton" onclick="setCards()">Play Again</button>

    <script>
      let animals = ["Anteater", "Badger", "Bat", "Bird", "Buffalo", "Bull", "Camel", "Capybara", "Cat", "Cobra", "Crab", "Cricket", "Crocodile", "Dog", "Dolphin", "Donkey", "Elephant", "Frog", "Gecko", "Hedgehog", "Hippo", "Iguana", "Lemming", "Lemur", "Leopard", "Lizard", "Lobster", "Monkey", "Moose", "Narwhal", "Octopus", "Oyster", "Panda", "Panther", "Penguin", "Python", "Skink", "Skunk", "Snake", "Squid", "Squirrel", "Starfish", "Toad", "Tortoise", "Turtle", "Zebra"]

      let cardIds = ["Button0", "Button1", "Button2", "Button3", "Button4", "Button5", "Button6", "Button7", "Button8", "Button9", "Button10", "Button11", "Button12", "Button13", "Button14"];

      let randAnimal = "";
      let randomIndex = 7;
      let low = 0;
      let high = 14;

      document.getElementById("instructions").innerHTML = "Find the animal below using a binary search. The animal cards are in alphabetical order";

      setCards();

      function setCards() {
        low = 0;
        high = 14;
        document.getElementById("update").innerHTML = "";
        document.getElementById("playAgainButton").disabled = true;
        selection = [];
        while (selection.length != 15) {
          let candidate = animals[Math.floor(Math.random() * animals.length)];
          if (!selection.includes(candidate)) {
            selection.push(candidate);
          }
        }
        selection.sort();
        randomIndex = 7;
        while (randomIndex == 7) {
          randomIndex = Math.floor(Math.random() * 15);
        }
        randAnimal = selection[randomIndex];
        console.log(randAnimal + " " + randomIndex)
        for (let i = 0; i < 15; i++) {
          document.getElementById("button" + i).innerHTML = i;
          document.getElementById("button" + i).disabled = false;
        }
        document.getElementById("randomAnimal").innerHTML = `<i>${randAnimal}</i>`;
      }

      function nextIndex(guess) {
        let correct = (low + high)/2;
        if (guess === correct) {
          let animal = selection[correct];
          if (randomIndex == correct) {
            document.getElementById("update").innerHTML = `Yay! You found ${randAnimal}!`;
            document.getElementById("playAgainButton").disabled = false;
            for (let i = 0; i < 15; i++) {
              document.getElementById("button" + i).innerHTML = selection[i];
              document.getElementById("button" + i).disabled = true;
            }
          }
          else if (randomIndex < correct) {
            document.getElementById("update").innerHTML = `You found ${animal}. Keep going to find ${randAnimal}!`;
            for (let i = correct; i < 15; i++) {
              document.getElementById("button" + i).innerHTML = "x";
              document.getElementById("button" + i).disabled = true;
            }
            document.getElementById("button" + correct).innerHTML = selection[correct];
            high = correct-1;
          } else {
            document.getElementById("update").innerHTML = `You found ${animal}. Keep going to find ${randAnimal}!`;
            for (let i = 0; i <= correct; i++) {
              document.getElementById("button" + i).innerHTML = "x";
              document.getElementById("button" + i).disabled = true;
            }
            document.getElementById("button" + correct).innerHTML = selection[correct];
            low = correct+1;
          }
        } else {
          document.getElementById("update").innerHTML = "That's not a binary search. Start over.";
          for (let i = 0; i < 15; i++) {
            document.getElementById("button" + i).disabled = true;
          }
          document.getElementById("playAgainButton").disabled = false;
        }
      }

    </script>
  </body>
</html>
